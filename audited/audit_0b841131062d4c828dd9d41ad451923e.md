> Searching codebase... [1](#0-0) [2](#0-1)

### Citations

**File:** crates/aptos/src/update/aptos.rs (L59-94)
```rust
    fn get_update_info(&self) -> Result<UpdateRequiredInfo> {
        // Build a configuration for determining the latest release.
        let config = ReleaseList::configure()
            .repo_owner(&self.repo_owner)
            .repo_name(&self.repo_name)
            .build()
            .map_err(|e| anyhow!("Failed to build configuration to fetch releases: {:#}", e))?;

        // Get the most recent releases.
        let releases = config
            .fetch()
            .map_err(|e| anyhow!("Failed to fetch releases: {:#}", e))?;

        // Find the latest release of the CLI, in which we filter for the CLI tag.
        // If the release isn't in the last 30 items (the default API page size)
        // this will fail. See https://github.com/aptos-labs/aptos-core/issues/6411.
        let mut releases = releases.into_iter();
        let latest_release = loop {
            let release = match releases.next() {
                Some(release) => release,
                None => return Err(anyhow!("Failed to find latest CLI release")),
            };
            if release.version.starts_with("aptos-cli-") {
                break release;
            }
        };
        let target_version = latest_release.version.split("-v").last().unwrap();

        // Return early if we're up to date already.
        let current_version = cargo_crate_version!();

        Ok(UpdateRequiredInfo {
            current_version: Some(current_version.to_string()),
            target_version: target_version.to_string(),
        })
    }
```

**File:** crates/aptos/src/update/mod.rs (L84-111)
```rust
#[derive(Debug)]
pub struct UpdateRequiredInfo {
    pub current_version: Option<String>,
    pub target_version: String,
}

impl UpdateRequiredInfo {
    pub fn update_required(&self) -> Result<bool> {
        match self.current_version {
            Some(ref current_version) => {
                // ignore ".beta" or ".rc" for version comparison
                // because bump_is_greater only supports comparison between `x.y.z`
                // as a result, `1.0.0.rc1` cannot be updated to `1.0.0.rc2`
                let target_version = if self.target_version.ends_with(".beta") {
                    &self.target_version[0..self.target_version.len() - 5]
                } else if self.target_version.ends_with(".rc") {
                    &self.target_version[0..self.target_version.len() - 3]
                } else {
                    &self.target_version
                };
                bump_is_greater(current_version, target_version).context(
                    "Failed to compare current and latest CLI versions, please update manually",
                )
            },
            None => Ok(true),
        }
    }
}
```
